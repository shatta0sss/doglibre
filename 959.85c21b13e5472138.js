"use strict";(self.webpackChunkapp_doglibre=self.webpackChunkapp_doglibre||[]).push([[959],{6959:(F,y,t)=>{t.r(y),t.d(y,{ccipFetch:()=>x,offchainLookup:()=>j,offchainLookupAbiItem:()=>w,offchainLookupSignature:()=>T});var m=t(5861),E=t(9934),g=t(38),l=t(2618),b=t(1448);class G extends l.G{constructor({callbackSelector:e,cause:r,data:c,extraData:i,sender:u,urls:n}){super(r.shortMessage||"An error occurred while fetching for an offchain result.",{cause:r,metaMessages:[...r.metaMessages||[],r.metaMessages?.length?"":[],"Offchain Gateway Call:",n&&["  Gateway URL(s):",...n.map(d=>`    ${(0,b.Gr)(d)}`)],`  Sender: ${u}`,`  Data: ${c}`,`  Callback selector: ${e}`,`  Extra data: ${i}`].flat()}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"OffchainLookupError"})}}class M extends l.G{constructor({result:e,url:r}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${(0,b.Gr)(r)}`,`Response: ${(0,g.P)(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"OffchainLookupResponseMalformedError"})}}class R extends l.G{constructor({sender:e,to:r}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${r}`,`OffchainLookup sender address: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"OffchainLookupSenderMismatchError"})}}var L=t(3979),S=t(1936),$=t(2910),v=t(8355),O=t(2099),P=t(770),A=t(7812);const T="0x556f1830",w={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};function j(a,e){return f.apply(this,arguments)}function f(){return(f=(0,m.Z)(function*(a,{blockNumber:e,blockTag:r,data:c,to:i}){const{args:u}=(0,S.p)({data:c,abi:[w]}),[n,d,s,o,k]=u;try{if(!function C(a,e){if(!(0,O.U)(a))throw new v.b({address:a});if(!(0,O.U)(e))throw new v.b({address:e});return a.toLowerCase()===e.toLowerCase()}(i,n))throw new R({sender:n,to:i});const p=yield x({data:s,sender:n,urls:d}),{data:D}=yield(0,E.R)(a,{blockNumber:e,blockTag:r,data:(0,P.zo)([o,(0,$.E)([{type:"bytes"},{type:"bytes"}],[p,k])]),to:i});return D}catch(p){throw new G({callbackSelector:o,cause:p,data:c,extraData:k,sender:n,urls:d})}})).apply(this,arguments)}function x(a){return h.apply(this,arguments)}function h(){return(h=(0,m.Z)(function*({data:a,sender:e,urls:r}){let c=new Error("An unknown error occurred.");for(let i=0;i<r.length;i++){const u=r[i],n=u.includes("{data}")?"GET":"POST",d="POST"===n?{data:a,sender:e}:void 0;try{const s=yield fetch(u.replace("{sender}",e).replace("{data}",a),{body:JSON.stringify(d),method:n});let o;if(o=s.headers.get("Content-Type")?.startsWith("application/json")?(yield s.json()).data:yield s.text(),!s.ok){c=new L.Gg({body:d,details:o?.error?(0,g.P)(o.error):s.statusText,headers:s.headers,status:s.status,url:u});continue}if(!(0,A.v)(o)){c=new M({result:o,url:u});continue}return o}catch(s){c=new L.Gg({body:d,details:s.message,url:u})}}throw c})).apply(this,arguments)}}}]);